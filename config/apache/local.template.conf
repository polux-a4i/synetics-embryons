<VirtualHost *:${APACHE_HTTP_PORT}>
    ServerName [PROJECT_DOMAIN]
    ErrorLog [PATH_TO_PROJECT]/var/log/errors.log
    CustomLog [PATH_TO_PROJECT]/var/log/access.log combined
    DocumentRoot [PATH_TO_PROJECT][BASE_ROOT]
    RewriteEngine On
    RewriteCond %{HTTPS} off
    RewriteRule ^/?(.*) https://%{SERVER_NAME}:${APACHE_HTTPS_PORT}/$1 [R,L]
    <Directory [PATH_TO_PROJECT][BASE_ROOT]>
        AllowOverride All
        require all granted
    </Directory>
    <FilesMatch "\.php$">
        SetHandler "proxy:fcgi://127.0.0.1:[PORT_PHP]"
    </FilesMatch>
</VirtualHost>
<VirtualHost *:${APACHE_HTTPS_PORT}>
    ServerName [PROJECT_DOMAIN]
    ErrorLog [PATH_TO_PROJECT]/var/log/errors.ssl.log
    CustomLog [PATH_TO_PROJECT]/var/log/access.ssl.log combined
    DocumentRoot [PATH_TO_PROJECT][BASE_ROOT]
    RewriteEngine On
    RewriteCond %{HTTPS} off
    RewriteRule ^/?(.*) https://%{SERVER_NAME}:${APACHE_HTTPS_PORT}/$1 [R,L]
    <IfModule mod_ssl.c>
        SSLCertificateFile [PATH_TO_PROJECT]/config/certs/[PROJECT_DOMAIN].pem
        SSLCertificateKeyFile [PATH_TO_PROJECT]/config/certs/[PROJECT_DOMAIN]-key.pem
    </IfModule>
    <Directory [PATH_TO_PROJECT][BASE_ROOT]>
        AllowOverride All
        require all granted
    </Directory>
    <FilesMatch "\.php$">
        SetHandler "proxy:fcgi://127.0.0.1:[PORT_PHP]"
    </FilesMatch>
</VirtualHost>
